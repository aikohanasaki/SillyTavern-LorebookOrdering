[ST 메모리 북 (STMB) 링크](https://github.com/aikohanasaki/SillyTavern-MemoryBooks) | [ST 로어북 순서 지정 (STLO) 링크](https://github.com/aikohanasaki/SillyTavern-LorebookOrdering)

# 🧠 최고의 메모리 가이드: STMB + STLO

ST 메모리 북 (STMB)은 **메모리 콘텐츠 생성**에 필수적이며, ST 로어북 순서 지정 (STLO)은 **해당 콘텐츠가 AI에 의해 실제로 사용되도록 보장**하는 데 필수적입니다. 이 둘을 함께 사용하면 **메모리 제외**라는 핵심 문제를 해결할 수 있습니다.

## 1단계: 무대 설정 (기초)

**"균등 정렬" 강제:** 먼저 SillyTavern의 기본 월드 정보(WI) 설정이 STLO가 제어할 수 있도록 구성되었는지 확인해야 합니다. SillyTavern **월드 정보 설정**에서 **월드 정보 삽입 전략**을 **"균등 정렬"**로 설정하십시오. STLO는 SillyTavern의 기본 코드의 엄격한 카테고리 정렬(채팅 → 페르소나 → 등)을 우회하기 위해 이 전략이 필요합니다.

## 2단계: 메모리 콘텐츠 만들기 (STMB의 역할)

STMB를 사용하여 장기 기억을 자동으로 만듭니다.

1.  **자동 요약 활성화:** STMB 패널(마술 지팡이 🪄)로 이동하여 **자동 요약**을 켭니다. 원하는 간격(예: **30개 메시지**)을 설정합니다.
2.  **메모리 북 바인딩/만들기:** 채팅에 메모리 전용 로어북이 있는지 확인하십시오. STMB는 일반적으로 메모리를 전역 유형의 책에 배치하지만 단순화를 위해 채팅에 바인딩된 로어북을 자주 사용합니다.
3.  **정상적으로 채팅하기:** 채팅이 진행됨에 따라 STMB는 자동으로 밀도 높고 고품질이며 구조화된 요약을 생성합니다. 이러한 메모리는 이제 AI의 제한된 컨텍스트 "비행"에 탑승하려는 "승객"입니다.

## 3단계: 우선순위 보장 (STLO의 역할)

이것이 가장 중요한 단계입니다. STLO를 사용하여 **채팅에 바인딩된 STMB 북**의 우선순위를 수동으로 낮추고 **캐릭터 필수 요소**를 높여야 합니다.

### A. "채팅 우선" 함정 깨기
기본적으로 채팅에 바인딩된 메모리 북에는 **가장 높은 우선순위**(채팅 우선)가 부여되어 너무 많은 컨텍스트 공간을 사용하고 다른 월드, 캐릭터 및/또는 페르소나 로어북을 차단할 위험이 있습니다. STLO를 사용하면 사용자 지정 특정 우선순위 수준을 다시 할당하여 이 문제를 해결할 수 있습니다.

### B. 권장 우선순위 스택

STLO를 사용하여 모든 관련 로어북에 대한 사용자 지정 우선순위를 설정합니다.

| 로어북/메모리 | 사용자 지정 STLO 우선순위 | 왜? (스택) |
| :--- | :--- | :--- |
| **캐릭터 필수 요소** (성격, 설명) | **우선순위 5** (가장 높음) | **먼저 로드**하여 다른 것이 로드되기 전에 핵심 캐릭터 정체성과 목소리를 고정합니다. |
| **STMB 메모리 북** (당신의 기억) | **우선순위 4** (높음) | **두 번째로 로드**됩니다. 메모리가 포함되도록 하기에 충분히 높지만 필수 요소가 먼저 로드되도록 보장하기에 충분히 낮습니다. |
| **페르소나 로어** (당신의 정체성) | **우선순위 3** (기본값/보통) | **세 번째로 로드**됩니다. 사용자 정체성 정보는 캐릭터의 핵심 설정과 중요한 메모리 다음에 표시됩니다. |
| **일반/무작위 로어** (이벤트 메모리, 월드 로어) | **우선순위 1-2** (가장 낮음) | **마지막으로 로드**됩니다. 덜 중요한 정보는 공간이 남아 있는 경우에만 포함됩니다. |

### C. 예산 한도 설정
STMB 메모리 북(및 기타 밀도 높은 로어북)의 경우 STLO의 **예산** 기능을 사용하여 우선순위가 높더라도 모든 공간을 소비하는 것을 방지합니다.

1.  STMB 로어북에 대한 STLO 구성을 엽니다.
2.  **예산** 한도(예: `5000`과 같은 **고정 토큰** 또는 `15%`와 같은 **컨텍스트 비율**)를 설정합니다.
3.  이렇게 하면 로어북이 조기에 처리되더라도 용량 한도를 준수하도록 **자동으로 트리밍**되어 다른 모든 우선순위 3, 2, 1 로어북을 위한 공간을 남겨 둡니다.
